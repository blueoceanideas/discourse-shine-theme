<script type="text/x-handlebars" data-template-name="/connectors/before-topic-list-body/all-category-header">
  <h3>All Topics in this Community</h3>
</script>


<script>
    I18n.translations.en.js.topic.create = "Create New Topic"
</script>

<script type="text/x-handlebars" data-template-name="/connectors/above-site-header/laruta-super-nav">
    <div class="super-nav">
    	<div>
    		<ul class="links">
    			<li>
    				<a href="https://www.msba.org/advertise-and-sponsor/">
                            Advertise &amp; Sponsor
                        </a>
    			</li>
    			<li>
    				<a href="https://www.msba.org/news/">
                            News
                        </a>
    			</li>
    			<li>
    				<a href="http://www.marylandbarfoundation.org/" target="_blank">
                            Maryland Bar Foundation
                        </a>
    				<span class="icon-external-link"></span>
    			</li>
    			<li>
    				<a href="https://www.msba.org/sso/fastcase" target="_blank">
                            Fastcase
                        </a>
    				<span class="icon-external-link"></span>
    			</li>
    			<li>
    				<a href="https://www.msba.org/calendar/">
                            Calendar
                        </a>
    			</li>
    			<li>
    				<a href="https://www.msba.org/about/member-directory/">
                            Member Directory
                        </a>
    			</li>
    			<li>
    				<a href="http://www.mylaw.org/" target="_blank">
                            MyLaw
                        </a>
    				<span class="icon-external-link"></span>
    			</li>
    		</ul>
    		<ul class="user-nav">
    			<li class="button-overhanging" id="renewWrapper">
    				<a href="https://www.msba.org"> Back to MSBA.org </a>
    			</li>
            </ul>
        </div>
    </div>
</script>

<script type="text/discourse-plugin" version="0.8">

// Queue up code to run after Ember does its rendering of DOM things
Ember.run.schedule('afterRender', () => {

    // api.onPageChange is the closest thing to a "page refresh"
    // since Discourse is a single page web app
    api.onPageChange(() =>{
        setCategoryBoxesBackgroundColor();
        moveNavAndFiltersOnCategoryView();
    });

    // check if the render <html> is a mobile or desktop view
    // because there are some major, major, major differences
    const isMobileView = function () {
        var html = document.querySelector("html");
        return html.classList.contains( "mobile-view" );
    }

    function moveNavAndFiltersOnCategoryView () {
        const route = Discourse.__container__.lookup('controller:application').get('currentPath');

        console.log(route);

        if ( route == "discovery.parentCategory" && isMobileView ) {

          // Get Navigation & Filters
          var navAndFilters = [
            "#navigation-bar",
            ".category-notifications-button",
            ".category-breadcrumb"
          ];

          // Get the Topic List
          const topicList = document.querySelector(".topic-list");

          // Get the Row to move the filtering above
          let targetRow = topicList.parentNode.parentNode.parentNode.parentNode;

          navAndFilters.forEach( ( elem ) => {
            let node = document.querySelector( elem );
            if ( node ) {
              targetRow.insertBefore(node, targetRow.firstChild);
            }
          } );
        }
    }


    function setCategoryBoxesBackgroundColor () {
        // Get the Category Elements nodeList
        // then convert to an Array
        var categoriesElems = isMobileView() ? document.querySelectorAll(".category-list > .category-list-item") : document.querySelectorAll(".category-list tr");
        var categoriesArray = Array.prototype.slice.call( categoriesElems );

        // Loop through the elements to capture border color
        // then pass it to the background color
        categoriesArray.forEach( function(category) {

                // Mobile view uses a separate table for each category
                if ( isMobileView() ) {
                    var categoryColor = category.style.borderColor;

                    // set the background color
                    category.style.backgroundColor = categoryColor;
                }

                // Desktop view uses a single table and each category is a table row
                else {
                    var categoryBox   = category.querySelector(".category");
                    var categoryColor = categoryBox.style.borderColor;

                    // set the background color
                    category.style.backgroundColor = categoryColor;
                }
            }
        );
    }
} );
</script>
